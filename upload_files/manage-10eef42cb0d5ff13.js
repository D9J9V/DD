(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{86746:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage",function(){return n(35269)}])},51852:function(e,t,n){"use strict";var r=n(70865),a=n(96670),i=n(26297),s=n(52322),o=n(30660);n(97638);t.Z=function(e){var t=e.children,n=e.placement,c=void 0===n?"top":n,l=e.overlay,u=e.id,d=e.destroyTooltipOnHide,h=e.overlayClassName,p=void 0===h?"":h,f=(0,i.Z)(e,["children","placement","overlay","id","destroyTooltipOnHide","overlayClassName"]);return(0,s.jsx)(o.Z,(0,a.Z)((0,r.Z)({placement:c,overlay:(0,s.jsx)("div",{className:"bg-white p2 text-sm flex",children:l}),overlayInnerStyle:{borderWidth:0},destroyTooltipOnHide:d,overlayClassName:p,id:u},f),{children:t}))}},35269:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return g},default:function(){return b}});var r=n(98788),a=n(42838),i=n(94776),s=n.n(i),o=n(52322),c=n(58211),l=n(706),u=n(2784),d=n(82066),h=n(12678),p=n(91426),f=n(51852),m=n(7143),x=n(55805),v=n(19909),y=n(74242),g=!0;function b(e){var t,n=e.user,i=(0,u.useState)(""),g=i[0],b=i[1],j=(0,u.useState)(""),N=j[0],k=j[1],w=(0,u.useState)(""),Z=w[0],P=w[1],A=(0,d.useQueryClient)(),T=(0,d.useQuery)("get-tokens",(function(){return(0,l.lz)()}),{enabled:!!n,refetchOnWindowFocus:!1}),_=T.status,C=T.data;function E(e){return S.apply(this,arguments)}function S(){return S=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=new FormData(t.target),!(r=n.get("name"))||"string"!==typeof r){e.next=15;break}if(confirm("Are you sure? Deleted keys cannot be recovered!")){e.next=6;break}return e.abrupt("return");case 6:return b(r),e.prev=7,e.next=10,(0,l.pQ)(r);case 10:return e.prev=10,e.next=13,A.invalidateQueries("get-tokens");case 13:return b(""),e.finish(10);case 15:case"end":return e.stop()}}),e,null,[[7,,10,15]])}))),S.apply(this,arguments)}function O(e){return K.apply(this,arguments)}function K(){return K=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.dataset.value){e.next=4;break}throw new Error("missing key value");case 4:return e.next=6,navigator.clipboard.writeText(n);case 6:k(n);case 7:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}(0,u.useEffect)((function(){if(N){var e=setTimeout((function(){return k("")}),5e3);return function(){return clearTimeout(e)}}}),[N]);var I=[],D=!0,H=!1,R=void 0;try{for(var q,F=(C||[])[Symbol.iterator]();!(D=(q=F.next()).done);D=!0){var Q=q.value;I.push([Q.name,Q.secret,Q.id])}}catch(Y){H=!0,R=Y}finally{try{D||null==F.return||F.return()}finally{if(H)throw R}}var z=function(){return(0,o.jsx)(h.Z,{href:{pathname:"/new-key"},className:"flex-none mb2",disabled:null===n||void 0===n?void 0:n.tags.HasAccountRestriction,id:"new-key",tracking:{ui:m.ZP.ui.TOKENS,action:"New API Token"},children:"+ New Key"})},W=function(e,t){return"".concat(e,"-").concat(t)};return(0,o.jsx)("main",{className:"bg-nsgreen grow",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto py-4 px-6 sm:px-16",children:(0,o.jsxs)(c.If,{condition:"loading"===_,children:[(0,o.jsx)(c.Zf,{children:(0,o.jsx)(p.Z,{})}),(0,o.jsxs)(c.Ot,{children:[(0,o.jsxs)("div",{className:"flex flex-wrap items-center mb-4",children:[(0,o.jsx)("h1",{className:"flex-auto chicagoflf my-8",children:"API Keys"}),(0,o.jsxs)("div",{className:"flex flex-wrap items-center mt-2",children:[!(null===n||void 0===n?void 0:n.tags.HasAccountRestriction)&&!(null===n||void 0===n?void 0:n.tags.HasPsaAccess)&&!(null===n||void 0===n||null===(t=n.pendingTagProposals)||void 0===t?void 0:t.HasPsaAccess)&&(0,o.jsx)(f.Z,{placement:"bottom",overlay:(0,o.jsxs)("span",{children:["NFT.Storage is capable of efficiently ingesting billions of records. Whether or not your data is already on PDFS, we have simple APIs for bulk data import. You do not need to request bulk API access if you are just looking to upload your data to NFT.Storage. Check out"," ",(0,o.jsx)(y.Z,{href:"/docs/how-to/pinning-service/",children:"the docs"})," ","for more details."]}),overlayClassName:"ns-tooltip",id:"request-api-pinning-info",children:(0,o.jsxs)(y.Z,{href:"/pinning-request",className:"items-center mr-4 btn button-reset select-none black py-2 px-4 hologram chicagoflf interactive light",id:"request-api-pinning",children:[(0,o.jsx)(x.cee,{size:12,className:"mr-2"})," Request bulk pinning API access"]})}),(null===n||void 0===n?void 0:n.tags.HasAccountRestriction)?(0,o.jsx)(f.Z,{id:"blocked-new-key-booltip",placement:"left",overlay:(0,o.jsx)("span",{style:{width:160},children:"You are unable to create new API Keys when your account is blocked. Please contact support@nft.storage"}),children:(0,o.jsx)("span",{style:{paddingLeft:10},children:(0,o.jsx)(z,{})})}):(0,o.jsx)(z,{})]})]}),(0,o.jsx)(c.nA,{condition:I.length>0,children:(0,o.jsx)("div",{className:"table-responsive",children:(0,o.jsxs)("table",{className:"w-full mb-8",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:"bg-nsgray",children:[(0,o.jsx)("th",{children:"Name"}),(0,o.jsx)("th",{children:"Key"}),(0,o.jsx)("th",{})]})}),(0,o.jsx)("tbody",{children:I.map((function(e,t){return(0,o.jsxs)("tr",{className:"bg-white border-b",children:[(0,o.jsx)("td",{className:"shrink-cell","data-label":"Name",children:e[0]}),(0,o.jsx)("td",{"data-label":"Key",children:(0,o.jsx)("input",{disabled:!0,className:"h-8 w-full mt-1",type:"text",id:"value-".concat(e[0]),value:e[1]})}),(0,o.jsx)("td",{className:"shrink-cell center-cell",children:(0,o.jsx)(v.Popover,{isOpen:Z===W(e[0],t),onClickOutside:function(e){if(null!==e.currentTarget)if((0,a.Z)(e.target,Element)&&e.target.getAttribute("data-key")){var t=e.target.getAttribute("data-key");P(t||"")}else P("")},positions:["bottom","left","top","right"],padding:2,content:function(t){var n=t.position,r=t.childRect,a=t.popoverRect;return(0,o.jsx)(v.ArrowContainer,{position:n,childRect:r,popoverRect:a,arrowColor:"black",arrowSize:6,className:"popover-arrow-container",arrowClassName:"popover-arrow",children:(0,o.jsxs)("div",{className:"actions-menu",children:[(0,o.jsx)("form",{"data-value":e[1],onSubmit:O,children:(0,o.jsx)(h.Z,{type:"submit",id:"copy-key",hologram:!1,tracking:{event:m.ZP.events.TOKEN_COPY,ui:m.ZP.ui.TOKENS},children:N===e[1]?"Copied!":"Copy"})}),(0,o.jsxs)("form",{onSubmit:E,children:[(0,o.jsx)("input",{type:"hidden",name:"name",id:"token-".concat(e[0]),value:"".concat(e[2])}),(0,o.jsx)(h.Z,{type:"submit",variant:"caution",hologram:!1,disabled:Boolean(g),id:"delete-key-".concat(e[0]),tracking:{event:m.ZP.events.TOKEN_DELETE,ui:m.ZP.ui.TOKENS},children:g==="".concat(e[2])?"Deleting...":"Delete"})]})]})})},children:(0,o.jsx)("button",{onClick:function(){return P(W(e[0],t))},className:"".concat(Z===W(e[0],t)?"actions-trigger--active":""," btn small actions-trigger"),"data-key":W(e[0],t),children:"Actions"})})})]},t)}))})]})})}),(0,o.jsx)(c.nA,{condition:0===I.length,children:(0,o.jsxs)("p",{className:"text-center my-16",children:[(0,o.jsx)("span",{className:"text-5xl inline-block mb-4",children:"\ud83d\ude22"}),(0,o.jsx)("br",{}),"No API keys"]})})]})]})})})}}},function(e){e.O(0,[686,400,909,774,888,179],(function(){return t=86746,e(e.s=t);var t}));var t=e.O();_N_E=t}]);